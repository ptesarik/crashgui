The crashgui protocol
---------------------
The basic blocks of the protocol were taken from the IMAP4 protocol
(see RFC3501), because:

1. I didn't want to re-invent the wheel.
2. The IMAP4 protocol can transmit binary blobs efficiently.
3. The protocol can handle multiple requests in parallel.

However, the set of commands is completely different from IMAP (because
you're not accessing a mailbox, obviously).

Commands
--------

* DISCONNECT command

   Arguments:  none

   Responses:  REQUIRED untagged response: BYE

   Result:     OK - disconnect completed
               BAD - command unknown or arguments invalid

      The DISCONNECT command informs the server that the client is done
      with the connection.  The server MUST send a BYE untagged response
      before the (tagged) OK response, and then close the network
      connection.

   Example:    C: A024 DISCONNECT
               S: * BYE connection closing
               S: A024 OK DISCONNECT completed
               (Server and client then close the connection)

* TERMINATE command

   Arguments:  none

   Responses:  REQUIRED untagged response: BYE

   Result:     OK - disconnect completed
               BAD - command unknown or arguments invalid

      The TERMINATE command requests the server to terminate. Since
      the server no longer runs after this command completes, this
      command also terminates the current connection.  The server
      MUST send a BYE untagged response before the (tagged) OK response,
      and then close the network connection.

   Example:    C: A025 TERMINATE
               S: * BYE terminating crashgui server
               S: A025 OK TERMINATE completed
               (Server and client then close the connection)

* READMEM command

   Arguments:  start address
               byte count
               OPTIONAL memory type

   Responses:  REQUIRED untagged responses: DUMP

   Result:     OK - memory dump completed
               NO - the specified memory location cannot be read
               BAD - command unknown or arguments invalid

      The READMEM command reads a chunk of memory and sends it as a string
      (usually a literal). The arguments are interpreted as hexadecimal
      numbers. The currently defined memory types are:

      KVADDR
         Kernel virtual address. This is the default if no memory type is
         specified.

      UVADDR
         User-space virtual address.

      PHYSADDR
         Physical address.

      XENMACHADDR
         Machine address (Xen only).

      FILEADDR
         File address.

   Example:    C: A026 READMEM c009bf2c 34
               S: * DUMP {52}
               S: <52 (that is 0x34) bytes of binary dump>
               S: A026 OK DUMP completed

* SYMBOL command

   Arguments:  symbol name

   Responses:  REQUIRED untagged responses: SYMBOL

   Result:     OK - symbol translated to address
               NO - no symbols with the given name could be found
               BAD - command unknown or arguments invalid

      The SYMBOL command looks up a symbol's kernel virtual address.
      All numbers in the response are hexadecimal.

   Example:    C: A007 SYMBOL "linux_banner"
               S: * SYMBOL c07070a0 c0 R "linux_banner"
               S: A007 OK SYMBOL completed

* ADDRESS command

   Arguments:  kernel virtual address

   Responses:  REQUIRED untagged responses: SYMBOL

   Result:     OK - address translated to a symbol
               NO - no symbols could be found for the address
               BAD - command unknown or arguments invalid

      The ADDRESS command translates a kernel virtual address to a symbol.
      The argument is interpreted as a hexadecimal kernel virtual address.
      All numbers in the response are hexadecimal.

   Example:    C: A027 ADDRESS c07070a0
               S: * SYMBOL c07070a0 c0 R "linux_banner"
               S: A027 OK ADDRESS completed

Authentication
--------------
There is no authentication. The crashgui protocol is designed to operate
on UNIX-domain sockets, so the normal system permissions apply.
